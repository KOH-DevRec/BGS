(self.webpackChunkbgs_app=self.webpackChunkbgs_app||[]).push([[826],{7826:function(e,n,t){"use strict";t.r(n);var r=t(1517),a=t(7419),o=t(7883),c=t.n(o),i=t(7401),s=t(7217),u=t.n(s),l=(t(1763),new(u())({key:"7b8f7e3a-4161-47e8-9fe0-ab98106e3aca"}));n.default=function(){var e=(0,i.useState)(""),n=(0,a.Z)(e,2),t=n[0],o=n[1],s=(0,i.useState)(""),u=(0,a.Z)(s,2),f=u[0],p=u[1],d=(0,i.useRef)(null),h=(0,i.useRef)(null);l.on("open",(function(){o(l.id),console.log(t),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){d.current.srcObject=e})),m()}));var m=function(){console.log("配信ID(Skyway)の取得"),fetch("http://localhost:3000/api/OnAir",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({streamingName:"りもーね"})}).then((function(e){return e.json()})).then((function(e){console.log("配信ID(Skyway)の取得結果"),console.log(e[0].streamingID),p(e[0].streamingID),console.log(f),g()}))},g=function(){l.call(f,d.current.srcObject).on("stream",function(){var e=(0,r.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.current.srcObject=n,e.next=3,h.current.play().catch(console.error);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())};return i.createElement("div",null,i.createElement("video",{id:"streamer-video",autoPlay:!0,muted:!0,playsInline:!0,ref:h}),i.createElement("div",null,i.createElement("video",{width:"50px",playsInline:!0,ref:d})))}}}]);